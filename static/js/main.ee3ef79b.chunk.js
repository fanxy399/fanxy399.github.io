(this.webpackJsonpjira=this.webpackJsonpjira||[]).push([[1],{116:function(t,n,e){"use strict";e.d(n,"a",(function(){return u})),e.d(n,"e",(function(){return o})),e.d(n,"c",(function(){return i})),e.d(n,"d",(function(){return s})),e.d(n,"b",(function(){return f})),e.d(n,"f",(function(){return l}));e(59);var r=e(31),c=e(35),a=e(0),u=function(t){if(!t)return{};var n=Object(c.a)({},t);return Object.keys(n).forEach((function(t){var e;(void 0===(e=n[t])||null===e||""===e)&&delete n[t]})),n},o=function(t){Object(a.useEffect)((function(){t()}),[])},i=function(t,n){var e=Object(a.useState)(t),c=Object(r.a)(e,2),u=c[0],o=c[1];return Object(a.useEffect)((function(){var e=setTimeout((function(){return o(t)}),n);return function(){return clearTimeout(e)}}),[t,n]),u},s=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],e=Object(a.useRef)(document.title).current;Object(a.useEffect)((function(){document.title=t}),[t]),Object(a.useEffect)((function(){return function(){n||(document.title=e)}}),[n,e])},f=function(){return window.location.href=window.location.origin},l=function(){var t=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return t.current=!0,function(){t.current=!1}}),[]),t}},173:function(t,n,e){"use strict";e.d(n,"a",(function(){return j})),e.d(n,"b",(function(){return p}));var r=e(18),c=e.n(r),a=e(35),u=e(117),o=e(49),i=e(230),s=e.n(i),f=e(77),l=e(81),d=e(0),b="http://localhost:3001",j=function(){var t=Object(o.a)(c.a.mark((function t(n){var e,r,i,l,d,j=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=j.length>1&&void 0!==j[1]?j[1]:{},r=e.data,i=e.token,e.headers,l=Object(u.a)(e,["data","token","headers"]),"GET"===(d=Object(a.a)({method:"GET",headers:{Authorization:i?"Bearer ".concat(i):"","Content-Type":r?"application/json":""}},l)).method.toUpperCase()?n+="?".concat(s.a.stringify(Object(a.a)({},r))):d.body=JSON.stringify(r||{}),t.abrupt("return",window.fetch("".concat(b,"/").concat(n),d).then(function(){var t=Object(o.a)(c.a.mark((function t(n){var e;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(401!==n.status){t.next=5;break}return t.next=3,Object(f.b)();case 3:return window.location.reload(),t.abrupt("return",Promise.reject({message:"\u8bf7\u91cd\u65b0\u767b\u9646"}));case 5:return t.next=7,n.json();case 7:if(e=t.sent,!n.ok){t.next=12;break}return t.abrupt("return",e);case 12:return t.t0=Promise,t.next=15,n.json();case 15:return t.t1=t.sent,t.abrupt("return",t.t0.reject.call(t.t0,t.t1));case 17:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),p=function(){var t=Object(l.b)().user;return Object(d.useCallback)((function(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];var c=e[0],u=e[1];return j(c,Object(a.a)(Object(a.a)({},u),{},{token:null===t||void 0===t?void 0:t.token}))}),[null===t||void 0===t?void 0:t.token])}},178:function(t,n,e){"use strict";e.d(n,"a",(function(){return s}));var r=e(35),c=e(31),a=e(0),u=e(116),o={stat:"idle",data:null,error:null},i={throwOnError:!1},s=function(t,n){var e=Object(a.useReducer)((function(t,n){return Object(r.a)(Object(r.a)({},t),n)}),Object(r.a)(Object(r.a)({},o),t)),s=Object(c.a)(e,2),f=s[0],l=function(t){var n=Object(u.f)();return Object(a.useCallback)((function(){return n.current?t.apply(void 0,arguments):void 0}),[n,t])}(s[1]),d=Object(r.a)(Object(r.a)({},i),n),b=Object(a.useState)((function(){return function(){}})),j=Object(c.a)(b,2),p=j[0],h=j[1],O=Object(a.useCallback)((function(t){return l({data:t,stat:"success",error:null})}),[l]),v=Object(a.useCallback)((function(t){return l({error:t,data:null,stat:"error"})}),[l]),m=Object(a.useCallback)((function(t,n){if(!t||!t.then)throw new Error("\u8bf7\u4f20\u5165 Promise \u7c7b\u578b\u6570\u636e");return h((function(){return function(){(null===n||void 0===n?void 0:n.retry)&&m(null===n||void 0===n?void 0:n.retry(),n)}})),l({stat:"loading"}),t.then((function(t){return O(t),t})).catch((function(t){return v(t),d.throwOnError?Promise.reject(t):t}))}),[d.throwOnError,O,v,l]);return Object(r.a)({isIdle:"idle"===f.stat,isSuccess:"success"===f.stat,isError:"error"===f.stat,isLoading:"loading"===f.stat,run:m,reTry:p,setData:O,setError:v},f)}},181:function(t,n,e){"use strict";e.d(n,"a",(function(){return f}));var r=e(35),c=e(117),a=e(59),u=e(0),o=e.n(u),i=e(21),s=[];setInterval((function(){if(s.length){var t=Object(a.a)(s);s=[],console.log(t)}}),5e3);var f=function(t){var n=t.metadata,e=t.phases,a=Object(c.a)(t,["metadata","phases"]);return Object(i.jsx)(o.a.Profiler,Object(r.a)({onRender:function(t,r,c,a,u,o,i){e&&!e.includes(r)||s.push({id:t,phase:r,actualDuration:c,baseDuration:a,startTime:u,commitTime:o,interactions:i,metadata:n})}},a))}},408:function(t,n,e){},412:function(t,n,e){"use strict";e.r(n);var r=e(0),c=e.n(r),a=e(25),u=e.n(a),o=e(81),i=e(133),s=e(237),f=e(134),l=e(147),d=function(t){Object(f.a)(e,t);var n=Object(l.a)(e);function e(){var t;Object(i.a)(this,e);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(t=n.call.apply(n,[this].concat(c))).state={error:null},t}return Object(s.a)(e,[{key:"render",value:function(){var t=this.state.error,n=this.props,e=n.fallbackRender,r=n.children;return t?e({error:t}):r}}],[{key:"getDerivedStateFromError",value:function(t){return t}}]),e}(r.Component),b=e(79),j=(e(408),e(21)),p=c.a.lazy((function(){return Promise.all([e.e(0),e.e(4),e.e(5)]).then(e.bind(null,482))})),h=c.a.lazy((function(){return Promise.all([e.e(0),e.e(6)]).then(e.bind(null,483))}));var O=function(){var t=Object(o.b)().user;return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(d,{fallbackRender:b.c,children:Object(j.jsx)(c.a.Suspense,{fallback:b.d,children:t?Object(j.jsx)(p,{}):Object(j.jsx)(h,{})})})})},v=function(t){t&&t instanceof Function&&e.e(7).then(e.bind(null,481)).then((function(n){var e=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,u=n.getTTFB;e(t),r(t),c(t),a(t),u(t)}))},m=e(115),g=(e(409),e(415)),x=e(245),w=e(176),y=function(t){var n=t.children,e=new g.a({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});return Object(j.jsx)(x.a,{client:e,children:Object(j.jsx)(w.a,{children:Object(j.jsx)(o.a,{children:n})})})},k=e(181);Object(m.b)((function(){u.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(k.a,{id:"Root App",phases:["mount"],children:Object(j.jsxs)(y,{children:[Object(j.jsx)(m.a,{}),Object(j.jsx)(O,{})]})})}),document.getElementById("root"))})),v()},77:function(t,n,e){"use strict";e.d(n,"d",(function(){return i})),e.d(n,"c",(function(){return f})),e.d(n,"a",(function(){return l})),e.d(n,"b",(function(){return d}));var r=e(18),c=e.n(r),a=e(49),u="http://localhost:3001",o="__auth_provider_token__",i=function(){return window.localStorage.getItem(o)},s=function(t){var n=t.user;return window.localStorage.setItem(o,n.token||""),n},f=function(t){return fetch("".concat(u,"/register"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then(function(){var t=Object(a.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=8;break}return t.t0=s,t.next=4,n.json();case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:return t.t2=Promise,t.next=11,n.json();case 11:return t.t3=t.sent,t.abrupt("return",t.t2.reject.call(t.t2,t.t3));case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}())},l=function(t){return fetch("".concat(u,"/login"),{method:"post",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then(function(){var t=Object(a.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ok){t.next=8;break}return t.t0=s,t.next=4,n.json();case 4:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 8:return t.t2=Promise,t.next=11,n.json();case 11:return t.t3=t.sent,t.abrupt("return",t.t2.reject.call(t.t2,t.t3));case 13:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}())},d=function(){var t=Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",window.localStorage.removeItem(o));case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},79:function(t,n,e){"use strict";e.d(n,"e",(function(){return j})),e.d(n,"d",(function(){return h})),e.d(n,"c",(function(){return O})),e.d(n,"b",(function(){return v})),e.d(n,"a",(function(){return m})),e.d(n,"f",(function(){return g}));e(172);var r,c,a,u,o=e(171),i=(e(244),e(182)),s=(e(242),e(174)),f=e(103),l=e(104),d=e(115),b=e(21),j=l.a.div(r||(r=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: ",";\n  margin-bottom: ",";\n\n  & > * {\n    margin-top: 0 !important;\n    margin-bottom: 0 !important;\n    margin-right: ",";\n  }\n"])),(function(t){return t.between?"space-between":void 0}),(function(t){return t.marginBottom+"rem"}),(function(t){return"number"===typeof t.gap?t.gap+"rem":t.gap?"2rem":void 0})),p=l.a.div(c||(c=Object(f.a)(["\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),h=function(){return Object(b.jsx)(p,{children:Object(b.jsx)(s.a,{size:"large"})})},O=function(t){var n=t.error;return Object(b.jsxs)(p,{children:[Object(b.jsx)(d.a,{}),Object(b.jsx)(v,{error:n})]})},v=function(t){var n,e=t.error;return(null===(n=e)||void 0===n?void 0:n.message)?Object(b.jsx)(i.a.Text,{type:"danger",children:e.message}):null},m=Object(l.a)(o.a)(a||(a=Object(f.a)(["\n  padding: 0;\n"]))),g=l.a.div(u||(u=Object(f.a)(["\n  padding: 3.2rem;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"])))},81:function(t,n,e){"use strict";e.d(n,"a",(function(){return O})),e.d(n,"b",(function(){return v}));var r=e(18),c=e.n(r),a=e(49),u=e(0),o=e.n(u),i=e(77),s=e(173),f=e(116),l=e(178),d=e(79),b=e(245),j=e(21),p=function(){var t=Object(a.a)(c.a.mark((function t(){var n,e,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,!(e=i.d())){t.next=7;break}return t.next=5,Object(s.a)("me",{token:e});case 5:r=t.sent,n=r.user;case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=o.a.createContext(void 0);h.displayName="AuthContext";var O=function(t){var n=t.children,e=Object(l.a)(),r=e.run,c=e.isLoading,a=e.isError,u=e.isIdle,o=e.error,s=e.setData,O=e.data,v=Object(b.b)();return Object(f.e)((function(){r(p())})),c||u?Object(j.jsx)(d.d,{}):a?Object(j.jsx)(d.c,{error:o}):Object(j.jsx)(h.Provider,{children:n,value:{user:O,login:function(t){return i.a(t).then((function(t){return s(t)}))},register:function(t){return i.c(t).then(s)},logout:function(){return i.b().then((function(){s(null),v.clear()}))}}})},v=function(){var t=Object(u.useContext)(h);if(!t)throw new Error("useAuth\u5fc5\u987b\u5728AuthProvider\u4e2d\u4f7f\u7528");return t}}},[[412,2,3]]]);
//# sourceMappingURL=main.ee3ef79b.chunk.js.map